!function(t){var e={};function a(o){if(e[o])return e[o].exports;var d=e[o]={i:o,l:!1,exports:{}};return t[o].call(d.exports,d,d.exports,a),d.l=!0,d.exports}a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var d in t)a.d(o,d,function(e){return t[e]}.bind(null,d));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="dist",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);firebase.initializeApp({apiKey:"AIzaSyA2BSQadnCuL4Q2uZXadB2wc4Uyc6YF6Dw",authDomain:"the-sandman-project.firebaseapp.com",databaseURL:"https://the-sandman-project.firebaseio.com",projectId:"the-sandman-project",storageBucket:"the-sandman-project.appspot.com",messagingSenderId:"734056077235",appId:"1:734056077235:web:a5ba667f89bde5eac5ddc6"});let o=firebase.firestore();const d=(t,e,a,o)=>({title:t,author:e,pages:a,status:o}),n={load:t=>{$("#dashBoard").empty(),$("#controlBoard").empty().load("components/editScreen.html #editScreen",()=>(t=>{let e=JSON.parse(t);$("#titleEdit").val(e.data.title),$("#authorEdit").val(e.data.author),$("#pagesEdit").val(e.data.pages),$("#bookID").val(e.id),"Read"===e.data.status?$("#read").attr("checked",!0):$("#unread").attr("checked",!0)})(t))},updateBooks:async(t,e,a,n,l)=>{let r=d(t,e,a,n);await o.doc(`books/${l}`).set(r),$("#dashBoard").html(`<h2 class="text-success">The book ${t} was update with success!</h2>`),setTimeout(()=>{$("#dashBoard").empty(),s.load()},1500)}},s=(()=>{const t=()=>{$("#dashBoard").empty(),$("#controlBoard").empty().load("components/mainScreen.html #mainScreen")},e=t=>{t.forEach(t=>$("#table").append(`<tr>\n        <td> ${t.data().title}</td> \n        <td> ${t.data().author}</td> \n        <td> ${t.data().pages}</td> \n        <td> ${t.data().status}</td>\n        <td>\n          <button id="editBtn2" class="btn-sm btn-warning mx-2" title="Edit this book" value='${JSON.stringify({id:t.id,data:t.data()})}'>Update</i>\n          </button> \n          <button id="deleteBtn" class="btn-sm btn-danger" title="Delete this book" value='${JSON.stringify({id:t.id,data:t.data()})}'>Delete</button> \n        </td>        \n      </tr>`)),$("#table").removeClass("d-none")};return{load:t,listBooks:async()=>{$("#dashBoard").empty().load("components/table.html #table");let t=await o.collection("books").get();e(t)},toEdit:t=>{$("#dashBoard").empty(),n.load(t)},toDelete:async e=>{let a=JSON.parse(e);await o.doc(`books/${a.id}`).delete(),$("#dashBoard").empty().html(`<h2 class="text-danger">The book ${a.data.title} was deleted!</h2>`),setTimeout(()=>{$("#dashBoard").empty(),t()},1500)},filllines:e}})(),l={load:()=>{$("#dashBoard").empty(),$("#controlBoard").empty().load("components/addScreen.html #addScreen")},save:async(t,e,a,n)=>{if([t,e,a].some(t=>""==t))return $("#dashBoard").html('<h2 class="text-danger">Please fill all fields!</h2>'),void setTimeout(()=>$("#dashBoard").empty(),1500);let l=o.doc(`books/${t}`),r=d(t,e,a,n);l.set(r).then(()=>{$("#dashBoard").html(`<h2 class="text-success">The book ${t} was add with success!</h2>`),setTimeout(()=>{$("#dashBoard").empty()},1500)}).catch(t=>{$("#dashBoard").html(`<h2 class="text-success">There was the following error: ${t}</h2>`),setTimeout(()=>$("#dashBoard").empty(),1500)}),s.load()}},r={load:()=>{$("#dashBoard").empty(),$("#controlBoard").empty().load("components/selectionScreen.html #selectionScreen",()=>(async()=>{(await o.collection("books").get()).forEach(t=>$("#selectBook").append(`<option value='${JSON.stringify({id:t.id,data:t.data()})}'>${t.data().title} - ${t.data().author}</option>`))})())}},c={load:()=>{$("#dashBoard").empty(),$("#controlBoard").empty().load("components/searchScreen.html #searchScreen")},search:async t=>{let e=await o.collection("books").where("title","==",t).get();if(0===e.size)return $("#dashBoard").html(`<h2 class="text-danger">The book ${t} doesn't exist in your library!</h2>`),void setTimeout(()=>{$("#dashBoard").empty(),s.load()},1500);let a=e.docs[0].data(),d=e.docs[0].id;$("#dashBoard").append(`<table class="text-center table table-dark table-hover">\n        <tr>\n          <td> ${a.title}</td> \n          <td> ${a.author}</td> \n          <td> ${a.pages}</td> \n          <td> ${a.status}</td>\n          <td>\n            <button id="editBtn2" class="btn-sm btn-warning mx-2" title="Edit this book" value='${JSON.stringify({id:d,data:a})}'>Update          </button> \n            <button id="deleteBtn" class="btn-sm btn-danger" title="Delete this book" value='${JSON.stringify({id:d,data:a})}'>Delete</button> \n          </td>        \n        </tr>\n      </table>`)}};s.load(),$(document).on("click","#cancelBtn",()=>s.load()),$(document).on("click","#listBooks",()=>s.listBooks()),$(document).on("click","#addBook",()=>l.load()),$(document).on("click","#editBook",()=>r.load()),$(document).on("click","#searchBook",()=>c.load()),$(document).on("click","#editBtn2",t=>s.toEdit(t.target.value)),$(document).on("click","#deleteBtn",t=>s.toDelete(t.target.value)),$(document).on("click","#selectBtn",()=>n.load($("#selectBook").val())),$(document).on("click","#updateBtn",()=>n.updateBooks($("#titleEdit").val().toLowerCase(),$("#authorEdit").val().toLowerCase(),$("#pagesEdit").val(),$("input[name*=statusEdit]")[0].checked?"Read":"Unread",$("#bookID").val())),$(document).on("click","#saveBtn",()=>l.save($("#title").val().toLowerCase(),$("#author").val().toLowerCase(),$("#pages").val(),$("input[name*=status]")[0].checked?"Read":"Unread")),$(document).on("click","#searchBtn",()=>c.search($("#bookToSearch").val().toLowerCase()))}]);